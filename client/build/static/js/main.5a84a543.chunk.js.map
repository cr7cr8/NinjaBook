{"version":3,"sources":["config.js","contexts/bookListFunctions.js","contexts/BookListContextProvider.jsx","contexts/userFunctions.js","contexts/UserContextProvider.jsx","components/BookListTools/BookForm.jsx","components/BookListTools/BookDonwload.jsx","components/BookListTools/BookDelete.jsx","components/BookListTools/BookDetails.jsx","components/BookList.jsx","components/Navbar.jsx","components/Form/Form.jsx","components/LoginForm.jsx","components/RegisterForm.jsx","App.js","serviceWorker.js","index.js"],"names":["url","getToken","axios","defaults","headers","common","initialState","title","author","Date","id","now","Fragment","to","style","color","localStorage","getItem","BookListContext","createContext","BookListContextProvider","props","useState","bookList","setState","Provider","value","dispatch","paramObj","type","book","find","finish","console","log","put","then","response","catch","err","data","alert","arr","filter","delete","setTimeout","get","justUnfished","list","map","files","picture","sort","a","b","post","pic","FormData","forEach","append","JSON","stringify","onUploadProgress","progressEvent","percentCompleted","Math","floor","loaded","total","setPicProgress","toFixed","setPic","file","setFileProgress","setFile","String","method","responseType","onDownloadProgress","obj","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","decodeURIComponent","body","appendChild","click","base64","btoa","Uint8Array","reduce","byte","fromCharCode","setPicture","setPicName","p1","data2","p2","Promise","all","bookListFunctions","children","token","Boolean","jwtDecode","getDecodedToken","username","setToken","setItem","UserContext","UserContextProvider","user","state","password","location","assign","indexOf","setErrMsg","removeItem","userFunctions","BookForm","picRef","setTitle","setAuthor","fileProgress","picProgress","useContext","myRef","createRef","placeholder","onChange","e","currentTarget","substr","index","key","src","opacity","width","height","name","multiple","display","accept","preventDefault","picArr","i","length","push","ref","fileInput","disabled","className","onClick","trim","float","marginTop","BookDownload","whenClick","goalWidth","setGoalWidth","isDisabled","setIsDisabled","springStyle","useSpring","from","margin","paddingLeft","padding","background","whiteSpace","borderRadius","border","div","paddingRight","BookDelete","setGoalOpa","setGoalHeight","timer","prevent","onDoubleClick","clearTimeout","onMouseEnter","parentNode","onMouseOut","BookDetails","goalOpa","goalHeight","picSize","setPicSize","picName","useLayoutEffect","config","delay","duration","friction","boxShadow","download","cursor","BookList","useEffect","Navbar","dispatchBook","dispatchUser","btnOn","setBtnOn","checked","onColor","offColor","offHandleColor","onHandleColor","handleDiameter","uncheckedIcon","checkedIcon","activeBoxShadow","textAlign","Form","isRegisterForm","history","format","password2","error","colName","msg","button","useRef","schema","Joi","string","min","required","label","any","valid","options","language","allowOnly","handleChange","validateProperty","result","validate","abortEarly","details","message","onSubmit","Object","keys","keyName","htmlFor","shift","toLocaleUpperCase","LoginForm","RegisterForm","process","App","path","render","hostname","match","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.5a84a543.chunk.js","sourcesContent":["\r\n\r\n\r\nlet url=\"\"\r\n\r\nif(process.env.NODE_ENV === \"development\"){\r\n\r\n    url=\"http://localhost/api\"\r\n}\r\nelse{\r\n    url=\"/api\"\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport default url;","\r\nimport jwtDecode from \"jwt-decode\";\r\nimport axios from \"axios\";\r\nimport url from \"../config\";\r\nimport React, { useContext, useEffect } from 'react';\r\nimport FileDownload from 'js-file-download';\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\nif (getToken()) { axios.defaults.headers.common['x-auth-token'] = getToken() }\r\n\r\n\r\nexport const initialState = initialize()\r\n\r\n\r\n\r\nfunction initialize() {\r\n    if (getToken()) {\r\n\r\n\r\n        return [{ title: \"... loading ...\", author: Date(), id: Date.now() }]\r\n    }\r\n    else {\r\n\r\n        return [{\r\n            title: <React.Fragment>Please <Link to=\"/login\" style={{ color: \"#eee\" }} > Login </Link> or <Link to=\"/register\" style={{ color: \"#eee\" }}> Regist </Link>  to use</React.Fragment>,\r\n            author: Date(), id: Date.now()\r\n        }]\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport const bookListFunctions = (bookList, setState, { type = \"\", ...paramObj }) => {\r\n\r\n    if (type === \"initialize\") {\r\n\r\n    }\r\n    else if (type === \"toggleStatus\") {\r\n\r\n        let book = bookList.find(book => book.id === paramObj.id)\r\n        book.finish = !book.finish\r\n\r\n        setState([...bookList])\r\n        console.log(bookList.find(book => book.id === paramObj.id))\r\n\r\n        return axios.put(`${url}/booklist/updatebook/` + paramObj.id, book)\r\n            .then(response => {\r\n                // console.log(response.data)\r\n\r\n            })\r\n            .catch(err => {\r\n\r\n                let book = bookList.find(book => book.id === paramObj.id)\r\n                book.finish = !book.finish\r\n                setState([...bookList])\r\n\r\n                console.log(err.response.data)\r\n                alert(err.response.data)\r\n            })\r\n\r\n    }\r\n    else if (!getToken()) {\r\n        console.log(\"no tokens to perferm booklist functions\")\r\n    }\r\n\r\n\r\n    else if (type === \"deleteBook\") {\r\n\r\n\r\n        const arr = bookList.filter(book => {\r\n\r\n            if (book.id !== paramObj.id) {\r\n\r\n                return book;\r\n            }\r\n        })\r\n\r\n        return axios.delete(`${url}/booklist/deletebook/` + paramObj.id)\r\n            .then(response => {\r\n                setTimeout(function () { setState(arr) }, 500)\r\n            })\r\n            .catch(err => {\r\n\r\n                setState([...bookList])\r\n\r\n                console.log(err.response)\r\n                alert(err.response.data)\r\n            })\r\n\r\n    }\r\n    else if (type === \"logout\") {\r\n        //  alert(\"aaa\")\r\n\r\n        setState([])\r\n    }\r\n    else if (type === \"cleanFinish\") {\r\n\r\n        setState(bookList.filter(book => book.finish !== true))\r\n\r\n    }\r\n    else if (type === \"getBookList\") {\r\n        return axios.get(paramObj.justUnfished ? `${url}/booklist/getunfinishedbooklist` : `${url}/booklist/getbooklist`)\r\n            .then(list => {\r\n\r\n\r\n\r\n                const arr = list.data.map((book) => {\r\n\r\n                    console.log(book)\r\n                    return { title: book.title, author: book.author, id: book.id, finish: book.finish, files: book.files, picture: book.picture }\r\n                })\r\n                setState(arr)\r\n\r\n\r\n\r\n                //   console.log(arr)\r\n\r\n            })\r\n            .catch(err => {\r\n\r\n                console.log(err.response.data)\r\n                alert(err.response.data)\r\n            })\r\n\r\n    }\r\n    else if (type === \"addBook\") {\r\n\r\n        setState([...bookList, paramObj.book].sort((a, b) => a.id >= b.id ? -1 : 1))\r\n\r\n        return axios.post(`${url}/booklist/addbook`, paramObj.book)\r\n            .then(\r\n                (response) => {\r\n\r\n\r\n                }\r\n            )\r\n            .catch(err => {\r\n\r\n                setState(bookList)\r\n                console.log(err.response.data)\r\n                alert(err.response.data)\r\n            })\r\n    }\r\n\r\n    else if (type === \"uploadBoth\") {\r\n\r\n\r\n\r\n        const data = new FormData()\r\n        paramObj.pic.forEach(picture => {\r\n            data.append('file', picture);\r\n        })\r\n        data.append('obj', JSON.stringify(paramObj.book));\r\n\r\n        const p1 = axios.post(`${url}/booklist/uploadpic`, data, {\r\n            headers: { 'content-type': 'multipart/form-data' },\r\n\r\n\r\n            onUploadProgress: progressEvent => {\r\n                let percentCompleted = Math.floor((progressEvent.loaded * 100) / progressEvent.total);\r\n                paramObj.setPicProgress((progressEvent.loaded * 100 / progressEvent.total).toFixed(2) + \"%\")\r\n\r\n                if (((progressEvent.loaded * 100 / progressEvent.total).toFixed(2) + \"%\") === \"100.00%\") {\r\n                    paramObj.setPicProgress(\"Processing on server\")\r\n                    paramObj.setPic(null);\r\n                }\r\n                console.log(percentCompleted)\r\n            },\r\n        })\r\n            .then(\r\n                (response) => {\r\n                  //  setState([...bookList, paramObj.book].sort((a, b) => a.id >= b.id ? -1 : 1))\r\n                    paramObj.setPicProgress(\"Picture\")\r\n                }\r\n            )\r\n            .catch(err => {\r\n                console.log(err.response.data)\r\n                alert(err.response.data)\r\n            })\r\n\r\n\r\n        const data2 = new FormData()\r\n        data2.append('file', paramObj.file);\r\n        data2.append('obj', JSON.stringify(paramObj.book));\r\n        const p2=  axios.post(`${url}/booklist/upload`, data2, {\r\n            headers: { 'content-type': 'multipart/form-data' },\r\n            onUploadProgress: progressEvent => {\r\n                let percentCompleted = Math.floor((progressEvent.loaded * 100) / progressEvent.total);\r\n                paramObj.setFileProgress((progressEvent.loaded * 100 / progressEvent.total).toFixed(2) + \"%\")\r\n\r\n                if (((progressEvent.loaded * 100 / progressEvent.total).toFixed(2) + \"%\") === \"100.00%\") {\r\n                    paramObj.setFileProgress(\"Processing on server\")\r\n                    paramObj.setFile(null);\r\n                }\r\n                console.log(percentCompleted)\r\n            },\r\n        })\r\n            .then(\r\n                (response) => {\r\n\r\n                 //   setState([...bookList, paramObj.book].sort((a, b) => a.id >= b.id ? -1 : 1))\r\n                    paramObj.setFileProgress(\"File\")\r\n                }\r\n            )\r\n            .catch(err => {\r\n                console.log(err.response.data)\r\n                alert(err.response.data)\r\n            })\r\n\r\n            Promise.all([p1,p2]).then(()=>{\r\n\r\n                setState([...bookList, paramObj.book].sort((a, b) => a.id >= b.id ? -1 : 1))\r\n\r\n            }).catch(err=>{console.log(err)\r\n                alert(err)\r\n            })\r\n\r\n\r\n    }\r\n    else if (type === \"uploadPic\") {\r\n\r\n\r\n        console.log(paramObj.pic)\r\n        const data = new FormData()\r\n        paramObj.pic.forEach(picture => {\r\n            data.append('file', picture);\r\n        })\r\n        data.append('obj', JSON.stringify(paramObj.book));\r\n\r\n        return axios.post(`${url}/booklist/uploadpic`, data, {\r\n            headers: { 'content-type': 'multipart/form-data' },\r\n\r\n\r\n            onUploadProgress: progressEvent => {\r\n                let percentCompleted = Math.floor((progressEvent.loaded * 100) / progressEvent.total);\r\n                paramObj.setPicProgress((progressEvent.loaded * 100 / progressEvent.total).toFixed(2) + \"%\")\r\n\r\n                if (((progressEvent.loaded * 100 / progressEvent.total).toFixed(2) + \"%\") === \"100.00%\") {\r\n                    paramObj.setPicProgress(\"Processing on server\")\r\n                    paramObj.setPic(null);\r\n                }\r\n                console.log(percentCompleted)\r\n            },\r\n        })\r\n            .then(\r\n                (response) => {\r\n                    setState([...bookList, paramObj.book].sort((a, b) => a.id >= b.id ? -1 : 1))\r\n                    paramObj.setPicProgress(\"Picture\")\r\n                }\r\n            )\r\n            .catch(err => {\r\n                console.log(err.response.data)\r\n                alert(err.response.data)\r\n            })\r\n    }\r\n    else if (type === \"uploadFile\") {\r\n\r\n        const data = new FormData()\r\n        if (paramObj.file) {\r\n            data.append('file', paramObj.file);\r\n        }\r\n        data.append('obj', JSON.stringify(paramObj.book));\r\n\r\n        return axios.post(`${url}/booklist/upload`, data, {\r\n            headers: { 'content-type': 'multipart/form-data' },\r\n            onUploadProgress: progressEvent => {\r\n                let percentCompleted = Math.floor((progressEvent.loaded * 100) / progressEvent.total);\r\n                paramObj.setFileProgress((progressEvent.loaded * 100 / progressEvent.total).toFixed(2) + \"%\")\r\n\r\n                if (((progressEvent.loaded * 100 / progressEvent.total).toFixed(2) + \"%\") === \"100.00%\") {\r\n                    paramObj.setFileProgress(\"Processing on server\")\r\n                    paramObj.setFile(null);\r\n                }\r\n                console.log(percentCompleted)\r\n            },\r\n        })\r\n            .then(\r\n                (response) => {\r\n\r\n                    setState([...bookList, paramObj.book].sort((a, b) => a.id >= b.id ? -1 : 1))\r\n                    paramObj.setFileProgress(\"File\")\r\n\r\n                    // console.log(response.data)\r\n                    //   alert(response.data)\r\n                }\r\n            )\r\n            .catch(err => {\r\n                console.log(err.response.data)\r\n                alert(err.response.data)\r\n            })\r\n    }\r\n\r\n    else if (type === \"downloadFile\") {\r\n\r\n        return axios({\r\n            url: `${url}/booklist/download/${String(paramObj.id)}`,\r\n            method: 'GET',\r\n            responseType: 'blob', // important\r\n            onDownloadProgress: progressEvent => {\r\n\r\n              \r\n                paramObj.obj((progressEvent.loaded * 100 / progressEvent.total).toFixed(2) + \"%\")\r\n                console.log((progressEvent.loaded * 100 / progressEvent.total).toFixed(2))\r\n\r\n            }\r\n        })\r\n            .then((response) => {\r\n\r\n                const url = window.URL.createObjectURL(new Blob([response.data]));\r\n                const link = document.createElement('a');\r\n                link.href = url;\r\n                link.setAttribute('download', decodeURIComponent(response.headers[\"file-name\"]));\r\n                document.body.appendChild(link);\r\n                link.click();\r\n            })\r\n            .catch(err => {\r\n                console.log(err.response.data)\r\n                alert(err.response.data)\r\n            })\r\n\r\n    }\r\n\r\n    else if (type === \"downloadPic\") {\r\n\r\n        console.log(paramObj.id)\r\n\r\n        return axios({\r\n            url: `${url}/booklist/downloadpic/${String(paramObj.id)}`,\r\n            method: 'GET',\r\n            responseType: 'arraybuffer', // important\r\n\r\n        })\r\n            .then((response) => {\r\n\r\n                const base64 = btoa(\r\n                    new Uint8Array(response.data).reduce(\r\n                        (data, byte) => data + String.fromCharCode(byte),\r\n                        '',\r\n                    ),\r\n                );\r\n                paramObj.setPicture(\"data:\"+response.headers[\"content-type\"]+\";base64,\" + base64)\r\n              \r\n                paramObj.setPicName(response.headers[\"file-name\"])\r\n                //     const url = window.URL.createObjectURL(new Blob([response.data]));\r\n                //     const link = document.createElement('a');\r\n                //     link.href = url;\r\n                //     link.setAttribute('download', decodeURIComponent(response.headers[\"file-name\"]));\r\n                //     document.body.appendChild(link);\r\n                //     link.click();\r\n            }).catch(err => {\r\n                //     console.log(err.response.data)\r\n                //     alert(err.response.data)\r\n            })\r\n\r\n    }\r\n    else {\r\n        return bookList\r\n    }\r\n}\r\n\r\nfunction setToken(token) {\r\n    localStorage.setItem(\"token\", token)\r\n}\r\n\r\nfunction getToken() {\r\n\r\n    return localStorage.getItem(\"token\")\r\n}\r\nfunction getDecodedToken() {\r\n\r\n    const token = localStorage.getItem(\"token\")\r\n\r\n    return Boolean(token) ? jwtDecode(token) : null\r\n}\r\n\r\nfunction deleteToken() {\r\n    return localStorage.removeItem(\"token\")\r\n}\r\n\r\n","import React, { createContext, useState } from 'react';\r\nimport { bookListFunctions, initialState } from './bookListFunctions';\r\n\r\n\r\nexport const BookListContext = createContext()\r\n\r\n\r\nconst BookListContextProvider = (props) => {\r\n\r\n\r\n\r\n    const [bookList, setState] = useState(initialState)\r\n\r\n    const dispatch = (paramObj) => {\r\n\r\n        return bookListFunctions(bookList, setState, paramObj)\r\n    }\r\n\r\n\r\n    return (\r\n        <BookListContext.Provider value={{ bookList, dispatch }}>\r\n            {props.children}\r\n        </BookListContext.Provider>\r\n\r\n    );\r\n}\r\n\r\nexport default BookListContextProvider;\r\n\r\n\r\n\r\n\r\n// const [books, dispatch] = useReducer(bookReducer, [\r\n//     { title: \"name of the wind\", author: \"Patrick rothfuss\", id: 1 },\r\n//     { title: \"the way of kings\", author: \"brande sandera\", id: 2 },\r\n//     { title: \"the final empire\", author: \"jillk huss\", id: 3 },\r\n//     { title: \"the hero of ages\", author: \"snelck dussbd\", id: 4 }\r\n// ])\r\n\r\n","import jwtDecode from \"jwt-decode\"\r\nimport axios from \"axios\";\r\nimport url from \"../config\";\r\n\r\n\r\nexport const initialState = (function () {\r\n\r\n  const token = getDecodedToken()\r\n\r\n  return token\r\n    ? { username: token.username }\r\n    : { username: \"\" }\r\n}());\r\n\r\n\r\nexport const userFunctions = (state, setState, { type = \"\", ...paramObj }) => {\r\n\r\n  if (type === \"removeLocalStorage\") {\r\n\r\n    localStorage.removeItem(\"token\")\r\n\r\n    setState({ ...state, username: \"\" })\r\n\r\n  }\r\n  else if (type === \"register\") {\r\n\r\n   \r\n\r\n    return axios\r\n      .post(`${url}/user/register`,\r\n        { username: paramObj.username, password: paramObj.password }\r\n      )\r\n      .then(response => {\r\n        setToken(response.headers[\"x-auth-token\"])\r\n        window.location.assign(\"/\")\r\n\r\n        //return Promise.resolve(response.data)\r\n      })\r\n      .catch(err => {\r\n        err.response.data.indexOf(\"user\") > -1\r\n          ? paramObj.setErrMsg(\"username\", err.response.data)\r\n          : paramObj.setErrMsg(\"username\", err.response.data)\r\n        //   setState({ ...state })\r\n        //return Promise.reject(err.response.data)\r\n      })\r\n\r\n\r\n  }\r\n  else if (type === \"login\") {\r\n\r\n    return axios\r\n      .post(`${url}/user/login`, paramObj)\r\n      .then(response => {\r\n\r\n        setToken(response.headers[\"x-auth-token\"])\r\n        window.location.assign(\"/\")\r\n        //return Promise.resolve(response.data)\r\n      })\r\n      .catch(err => {\r\n        err.response.data.indexOf(\"user\") > -1\r\n          ? paramObj.setErrMsg(\"username\", err.response.data)\r\n          : paramObj.setErrMsg(\"password\", err.response.data)\r\n\r\n        //  return Promise.reject(err.response.data)\r\n      })\r\n\r\n  }\r\n  else { return state }\r\n\r\n\r\n}\r\n\r\n\r\n\r\nfunction setToken(token) {\r\n  localStorage.setItem(\"token\", token)\r\n}\r\n\r\nfunction getToken() {\r\n\r\n  return localStorage.getItem(\"token\")\r\n}\r\nfunction getDecodedToken() {\r\n\r\n  const token = localStorage.getItem(\"token\")\r\n\r\n  return Boolean(token) ? jwtDecode(token) : null\r\n}\r\n\r\n\r\n\r\n","import React, { createContext, useState } from 'react';\r\n\r\nimport { userFunctions, initialState } from './userFunctions';\r\n\r\nexport const UserContext = createContext()\r\n\r\nconst UserContextProvider = (props) => {\r\n\r\n    const [user, setState] = useState(initialState)\r\n\r\n    const dispatch = (paramObj) => {\r\n        return userFunctions(user, setState, paramObj)\r\n    }\r\n\r\n\r\n    return (\r\n        <UserContext.Provider value={{ user, dispatch }}>\r\n            {props.children}\r\n        </UserContext.Provider>\r\n    );\r\n}\r\n\r\nexport default UserContextProvider;\r\n\r\n","import React, { useState, useContext, createRef } from 'react';\r\nimport { BookListContext } from '../../contexts/BookListContextProvider';\r\nimport { UserContext } from '../../contexts/UserContextProvider';\r\n\r\n// import img from \"./11.jpg\"  {/* <img src={img}/> */}\r\n\r\n\r\nimport TextareaAutosize from 'react-textarea-autosize';\r\n\r\n\r\n\r\nconst BookForm = (props) => {\r\n\r\n    const [title, setTitle] = useState(\"\")\r\n    const [author, setAuthor] = useState(\"\")\r\n\r\n    const [file, setFile] = useState(null)\r\n    const [pic, setPic] = useState(null)\r\n\r\n\r\n    const [fileProgress, setFileProgress] = useState(\"File\")\r\n    const [picProgress, setPicProgress] = useState(\"Picture\")\r\n\r\n\r\n\r\n    const { dispatch } = useContext(BookListContext)\r\n    const { user } = useContext(UserContext)\r\n\r\n    let myRef = createRef()\r\n\r\n    let picRef;\r\n\r\n\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault()\r\n\r\n\r\n        if (title === \"\") { return null }\r\n\r\n\r\n\r\n        !file && !pic && dispatch({ type: \"addBook\", book: { title, author: author || Date().substr(0, 24), id: Date.now(), finish: false } })\r\n\r\n        file && !pic && dispatch({ type: \"uploadFile\", setFileProgress, setFile, file, pic, book: { title, files: [file.name], author: author || Date().substr(0, 24), id: Date.now(), finish: false } })\r\n\r\n        !file && pic && dispatch({ type: \"uploadPic\", setPicProgress, setPic, pic, book: { title, picture: true, author: author || Date().substr(0, 24), id: Date.now(), finish: false } })\r\n        \r\n        file && pic &&\r\n\r\n            dispatch({ type: \"uploadBoth\", setFileProgress,setPicProgress, setFile, setPic, file, pic, book: { title, picture:true,files: [file.name], author: author || Date().substr(0, 24), id:Date.now(), finish: false } })\r\n\r\n\r\n\r\n        setTitle(\"\")\r\n        setAuthor(\"\")\r\n    }\r\n\r\n    const handleChange = (e) => {\r\n        e.preventDefault();\r\n        console.log(e.currentTarget.files[0])\r\n        if (!e.currentTarget.files[0]) {\r\n            return setFile(null)\r\n        }\r\n\r\n        setTitle((title + \" \" + e.currentTarget.files[0].name).trim())\r\n        e.currentTarget.files[0]\r\n            ? setFile(e.currentTarget.files[0])\r\n            : setFile(null)\r\n\r\n    }\r\n\r\n    const picChange = (e) => {\r\n        e.preventDefault();\r\n        console.log(e.currentTarget.files)\r\n        if (!e.currentTarget.files[0]) {\r\n            return setPic(null)\r\n        }\r\n\r\n        const picArr = [];\r\n        for (let i = 0; i < e.currentTarget.files.length; i++) {\r\n            picArr.push(e.currentTarget.files[i])\r\n            // break;\r\n\r\n        }\r\n\r\n        //setTitle((title + \" \" + e.currentTarget.files[0].name).trim())\r\n        e.currentTarget.files\r\n            ? setPic(picArr)\r\n            : setPic(null)\r\n\r\n\r\n    }\r\n\r\n\r\n    //{!user.username &&<button>  <Link to=\"/login\" >login  </Link></button>}\r\n    return (\r\n\r\n        // user.username&& <React.Fragment>\r\n        <React.Fragment>\r\n            <TextareaAutosize value={title}\r\n\r\n                placeholder=\"title\"\r\n                onChange={\r\n                    (e) => {\r\n\r\n                        setTitle(e.currentTarget.value)\r\n                    }}\r\n\r\n            ></TextareaAutosize>\r\n            <input placeholder={Date().substr(0, 24)} type=\"text\" value={author} onChange={(e) => { setAuthor(e.currentTarget.value) }} ></input>\r\n\r\n            {\r\n                pic && pic.map((picture, index) => {\r\n                    return <img key={index} src={picture ? URL.createObjectURL(picture) : \"\"} style={{ opacity: 1.0, width: 200, height: \"auto\" }}></img>\r\n                })\r\n            }\r\n\r\n            {file && <div>{file.name}</div>}\r\n\r\n\r\n            <div>\r\n\r\n                <input type=\"file\" multiple style={{ display: \"none\" }} accept=\"image/x-png,image/gif,image/jpeg\" onChange={picChange} ref={fileInput => picRef = fileInput} />\r\n                <button\r\n                    disabled={fileProgress !== \"File\"||picProgress!==\"Picture\"}\r\n                    className=\"btn\"\r\n                    onClick={() => { picRef.click() }}>\r\n                    {picProgress}\r\n                </button>\r\n\r\n\r\n                <input type=\"file\" style={{ display: \"none\" }} onChange={handleChange} ref={fileInput => myRef = fileInput} />\r\n                <button\r\n                    disabled={fileProgress !== \"File\"||picProgress!==\"Picture\"}\r\n                    className=\"btn\"\r\n                    onClick={() => { myRef.click() }}>\r\n                    {fileProgress}\r\n                </button>\r\n\r\n\r\n\r\n\r\n\r\n                <button\r\n                    disabled={!title || fileProgress !== \"File\"}\r\n                    className=\"btn\"\r\n                    style={{ float: \"right\", marginTop: \"5px\" }}\r\n                    onClick={handleSubmit}>\r\n                    Add Book\r\n                </button >\r\n            </div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n            {/* </form> } */}\r\n\r\n\r\n\r\n\r\n\r\n            {/* <img src=\"https://picsum.photos/600/100\" style={{opacity:0.3}}></img> */}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n        </React.Fragment>\r\n    );\r\n}\r\n\r\nexport default BookForm;","import React, { useState } from 'react';\r\nimport { Spring } from 'react-spring/renderprops';\r\nimport { useSpring, animated } from 'react-spring/';\r\n\r\nconst BookDownload = ({ whenClick, ...props }) => {\r\n\r\n\r\n    const [goalWidth, setGoalWidth] = useState(\"0%\")\r\n\r\n    const [isDisabled, setIsDisabled] = useState(false)\r\n\r\n    const springStyle = useSpring({\r\n        from: { width: \"0%\" },\r\n\r\n        margin: \"0\", width: goalWidth, paddingLeft: \"10px\", padding: \"0\",\r\n        //  background: \"linear-gradient(90deg, red 80%, blue 20%)\",\r\n\r\n        background: \"linear-gradient(to right, #4880EC, #019CAD)\",\r\n        whiteSpace: \"nowrap\",\r\n        borderRadius: \"4px\",\r\n\r\n    })\r\n\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n            <button disabled={isDisabled}\r\n                style={{ padding: \"0\", border: \"0\" }}\r\n\r\n\r\n\r\n                onClick={() => { setIsDisabled(true); whenClick(setGoalWidth); }}\r\n                {...props}\r\n            >\r\n\r\n                <animated.div\r\n\r\n                    style={springStyle}\r\n                    onClick={function () { setGoalWidth(\"5%\") }}\r\n                >\r\n                    <div style={{\r\n                        paddingLeft: \"10px\", paddingRight: \"10px\", \r\n                      \r\n                    }}>{props.children}</div>\r\n                </animated.div>\r\n            </button>\r\n\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\n\r\n\r\nexport default BookDownload","import React, { useContext, useRef, useLayoutEffect, useState, Component } from 'react';\r\nimport { BookListContext } from '../../contexts/BookListContextProvider'\r\n\r\nimport { Spring } from 'react-spring/renderprops';\r\nimport { useSpring, animated } from 'react-spring';\r\n\r\nimport BookDownload from './BookDonwload';\r\nimport { UserContext } from '../../contexts/UserContextProvider';\r\n\r\n\r\n\r\nconst BookDelete = ({book,dispatch,setGoalOpa,setGoalHeight,...props}) => {\r\n\r\n    var timer = 0;\r\n    var delay = 200;\r\n    var prevent = false;\r\n\r\n\r\n    return (\r\n        <React.Fragment>\r\n\r\n\r\n            <button className=\"deleteBtn\"\r\n                onClick={() => {\r\n                    timer = setTimeout(function () {\r\n                        if (!prevent) {\r\n                            dispatch({ type: \"toggleStatus\", id: book.id })\r\n                        }\r\n                        prevent = false;\r\n                    }, delay);\r\n                }}\r\n                onDoubleClick={\r\n                    () => {\r\n                        clearTimeout(timer);\r\n                        prevent = true;\r\n                        setGoalOpa(0)\r\n                        setGoalHeight(0)\r\n                        dispatch({ type: \"deleteBook\", id: book.id })\r\n\r\n\r\n                    }\r\n                }\r\n\r\n                onMouseEnter={(e) => { e.currentTarget.parentNode.style = \"opacity:0.7;  text-decoration: line-through;  padding-left:10px\" }}\r\n                onMouseOut={(e) => { e.currentTarget.parentNode.style = \"opacity:1;  text-decoration: none;  padding-left:10px\" }}\r\n\r\n            >{props.children}</button>\r\n\r\n\r\n\r\n        </React.Fragment>\r\n\r\n\r\n\r\n\r\n    );\r\n}\r\n\r\nexport default BookDelete;","import React, { useContext, useRef, useLayoutEffect, useState, Component } from 'react';\r\nimport { BookListContext } from '../../contexts/BookListContextProvider'\r\n\r\nimport { Spring } from 'react-spring/renderprops';\r\nimport { useSpring, animated } from 'react-spring';\r\n\r\nimport BookDownload from './BookDonwload';\r\nimport BookDelete from './BookDelete';\r\n\r\nimport { UserContext } from '../../contexts/UserContextProvider';\r\n\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst BookDetails = ({ book, ...props }) => {\r\n\r\n    const { dispatch } = useContext(BookListContext)\r\n    const { user } = useContext(UserContext)\r\n\r\n\r\n    const [goalOpa, setGoalOpa] = useState(1)\r\n    const [goalHeight, setGoalHeight] = useState(\"auto\")\r\n    const [picture, setPicture] = useState(null)\r\n    const [picSize, setPicSize] = useState(20)\r\n    const [picName, setPicName] = useState(null)\r\n\r\n    useLayoutEffect(() => {\r\n        if (book.picture) {\r\n\r\n            dispatch({ type: \"downloadPic\", id: book.id, setPicture,setPicName })\r\n        }\r\n\r\n\r\n    }, [])\r\n\r\n\r\n    return (<React.Fragment>\r\n        <Spring from={{ opacity: 0, height: 0 }} to={{ opacity: goalOpa, height: goalHeight }} config={{ delay: 0, duration: 200, friction: 10 }} >\r\n\r\n            {(props) => {\r\n\r\n\r\n\r\n                return (\r\n\r\n                    <li style={props} >\r\n\r\n                        <div style={{ height: \"5px\", opacity: \"0\" }}></div>\r\n\r\n                        <div className={book.finish ? \"done\" : \"\"} style={{ paddingLeft: \"10px\", paddingRight: \"0px\" }}>\r\n                            {user.username\r\n                                ? <BookDelete {...{ setGoalOpa, setGoalHeight, dispatch, book, props }}>  delete  </BookDelete>\r\n                                : <div></div>\r\n                            }\r\n\r\n\r\n                            <span className={book.finish ? \"title done\" : \"title\"} style={{ boxShadow: \"none\" }}    >{book.title}  </span>\r\n\r\n                            {\r\n                                book.picture\r\n                                &&\r\n\r\n                                <div style={{ paddingRight: \"10px\", }}>\r\n\r\n                                    <Spring from={{ opacity: 0, width: \"0%\" }} to={{ opacity: 1, width: picSize + \"%\" }} config={{ duration: 200 }} >\r\n                                        {(props) => {\r\n                                            return (\r\n\r\n                                                <a href={picture} download={picName} style={{cursor:\"default\"}}>\r\n                                                    <img src={picture} style={{ ...props, borderRadius: \"4px\" }} /*style={{ width: picSize ? \"100%\" : \"20%\", height: \"auto\" }}*/\r\n                                                        onClick={function (e) {\r\n                                                            e.preventDefault()\r\n                                                            picSize === 20 ? setPicSize(100) : setPicSize(20)\r\n\r\n\r\n                                                        }} />\r\n                                                </a>\r\n                                            )\r\n                                        }}\r\n\r\n\r\n                                    </Spring>\r\n                                </div>\r\n\r\n                            }\r\n\r\n\r\n                            <div className={book.finish ? \"author done\" : \"author\"} >{book.author} </div>\r\n\r\n                            {book.files &&\r\n\r\n                                <BookDownload\r\n                                    whenClick={(obj) => { dispatch({ type: \"downloadFile\", id: book.id, obj: obj }) }}\r\n                                    className=\"btn bar\"\r\n                                >\r\n                                    {book.files[0]}\r\n                                </BookDownload>\r\n                            }\r\n\r\n                        </div>\r\n                        <div style={{ height: \"5px\", opacity: \"0\" }}></div>\r\n                    </li>\r\n\r\n\r\n                )\r\n            }}\r\n        </Spring>\r\n\r\n\r\n    </React.Fragment>\r\n    );\r\n}\r\n\r\nexport default BookDetails;","import React, { useContext, useEffect } from 'react';\r\nimport { BookListContext } from '../contexts/BookListContextProvider'\r\nimport BookForm from './BookListTools/BookForm';\r\nimport BookDetails from './BookListTools/BookDetails';\r\nimport { UserContext } from '../contexts/UserContextProvider';\r\n\r\n\r\nconst BookList = (props) => {\r\n\r\n    const { bookList, dispatch } = useContext(BookListContext)\r\n    const { user } = useContext(UserContext)\r\n\r\n    //  bookList.sort(\r\n    //      function(a,b){  \r\n\r\n    //          return a.id>=b.id?-1:1\r\n\r\n    //      }\r\n    //  )\r\n    useEffect(function () {\r\n\r\n        setTimeout(function () { dispatch({ type: \"getBookList\", justUnfished: true }) }, 0)\r\n    }, [])\r\n\r\n\r\n    return (\r\n\r\n      <div className=\"book-list \">\r\n           {user.username&& <BookForm />}\r\n\r\n            <ul>\r\n                {\r\n                    bookList.map(book => {\r\n\r\n                        return <BookDetails style={props} {...{ key: book.id, book }}/*book={book}*/ />\r\n\r\n\r\n\r\n                    })\r\n                }\r\n            </ul>\r\n        </div>\r\n\r\n       \r\n\r\n    );\r\n}\r\n\r\nexport default BookList;","import React, { useContext, useState } from 'react';\r\nimport { BookListContext } from '../contexts/BookListContextProvider'\r\nimport { Route, Switch, Link, } from 'react-router-dom';\r\nimport { UserContext } from '../contexts/UserContextProvider';\r\n\r\n\r\nimport SwitchButton from \"react-switch\";\r\n\r\nconst Navbar = (props) => {\r\n\r\n\r\n  const { bookList, dispatch: dispatchBook } = useContext(BookListContext);\r\n  const { user, dispatch: dispatchUser } = useContext(UserContext)\r\n\r\n  const [btnOn, setBtnOn] = useState(false)\r\n\r\n  document.title = user.username || \"NinjaBook\"\r\n  return (\r\n\r\n\r\n    <React.Fragment>\r\n\r\n      <nav className=\"navbar\" >\r\n\r\n        <h1>{user.username} Reading List...</h1>\r\n        <p>Currently you have {bookList.length} books to get through...</p>\r\n\r\n        <SwitchButton\r\n          checked={btnOn}\r\n          onChange={function () { !btnOn ? dispatchBook({ type: \"getBookList\" }) : dispatchBook({ type: \"cleanFinish\" }); setBtnOn(!btnOn) }}\r\n\r\n          onColor=\"#6d3d6d\"\r\n          offColor=\"#6d3d6d\"\r\n\r\n          offHandleColor=\"#eeeeee\"\r\n          onHandleColor=\"#eeeeee\"\r\n\r\n          handleDiameter={30}\r\n          uncheckedIcon={false}\r\n          checkedIcon={false}\r\n          boxShadow=\"0px 1px 5px rgba(0, 0, 0, 0.6)\"\r\n          activeBoxShadow=\"0px 0px 1px 10px rgba(0, 0, 0, 0.2)\"\r\n          height={1}\r\n          width={48}\r\n          className=\"react-switch\"\r\n          id=\"material-switch\"\r\n\r\n\r\n        />\r\n      </nav>\r\n\r\n\r\n\r\n      <button> <Link to=\"/\">home </Link> </button>\r\n      {!user.username && <button>  <Link to=\"/login\" >login  </Link></button>}\r\n      {!user.username && <button>  <Link to=\"/register\">register  </Link></button>}\r\n\r\n      {/* <button style={{float:\"right\"}} onClick={dispatchBook.bind(null, { type: \"removeLocalStorage\" })}>Default</button> */}\r\n      {user.username && <button style={{ float: \"right\" }}\r\n        onClick={function () {\r\n          dispatchBook({ type: \"logout\" })\r\n\r\n          dispatchUser({ type: \"removeLocalStorage\" })\r\n\r\n          window.location.assign(\"/\")\r\n        }}>\r\n        logout\r\n        </button>\r\n      }\r\n      {Boolean(bookList.length) || <p style={{ textAlign: \"center\" }}>No books to read, Hello free time :)</p>}\r\n    </React.Fragment>\r\n\r\n  );\r\n}\r\n\r\nexport default Navbar;","import React, { useState, useEffect, useRef, useContext, useCallback } from 'react';\r\nimport Joi from 'joi-browser';\r\nimport jwtDecode from \"jwt-decode\"\r\n\r\nimport {  UserContext } from \"../../contexts/UserContextProvider\"\r\n\r\nconst Form = (props) => {\r\n\r\n    //console.log(props.location.pathname)\r\n    let isRegisterForm = props.isRegisterForm\r\n    const { user, dispatch: dispatchUser } = useContext(UserContext)\r\n    \r\n    \r\n    if(user.username){(props.history.push(\"/\"))}\r\n   \r\n    \r\n    \r\n    const [state, setState] = useState(\r\n        {\r\n            format: isRegisterForm\r\n                ? [\"text\", \"password\", \"password\"]\r\n                : [\"text\", \"password\"],\r\n\r\n            data: isRegisterForm\r\n                ? { username: \"\", password: \"\", password2: \"\", }\r\n                : { username: \"\", password: \"\" },\r\n\r\n            error: isRegisterForm\r\n                ? { username: \"\", password: \"\", password2: \"\" }\r\n                : { username: \"\", password: \"\" }\r\n        }\r\n    )\r\n\r\n\r\n    const setErrMsg = (colName, msg) => {\r\n\r\n\r\n        setState({\r\n            ...state,\r\n            error: { ...state.error, [colName]: msg } \r\n        })\r\n\r\n\r\n        // const obj = state.error\r\n        // const obj2 = { ...obj, [colName]: msg }\r\n        // const obj3 = { error: obj2 }\r\n        // const obj4 = { ...state, ...obj3 }\r\n        // setState(obj4)\r\n    }\r\n\r\n    const button = useRef();\r\n\r\n    //  button.current.disabled = \"true\"\r\n    //  button.current.value = isRegisterForm ? \"Sign Up\" : \"Login\"\r\n\r\n\r\n\r\n\r\n    const schema = {\r\n        username: Joi.string().min(3).required().label(\"Username\"),\r\n        password: Joi.string().min(3).required().label(\"Password\"),\r\n        password2: Joi.any().valid(state.data.password).required().options({ language: { any: { allowOnly: 'is not matching' } } }).label(\"Retyped Passwrod\")\r\n    }\r\n\r\n\r\n    const doSubmit = (e) => {\r\n        e.preventDefault();\r\n        dispatchUser({ type: isRegisterForm?\"register\":\"login\", ...state.data, setErrMsg })\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n    const handleChange = (e) => {\r\n        // e.persist();\r\n\r\n        state['data'][e.currentTarget.name] = e.currentTarget.value\r\n\r\n        state['error'] = validateProperty(e)\r\n            ? { ...state['error'], [e.currentTarget.name]: validateProperty(e) }\r\n            : (function () { delete state['error'][e.currentTarget.name]; return state['error'] })()\r\n\r\n        if (isRegisterForm && (e.currentTarget.name === \"password\")) {\r\n            if (!state['error']['password']) {\r\n\r\n                if (state['data']['password'] === state['data']['password2']) {\r\n                    delete state['error']['password2']\r\n                }\r\n                else {\r\n\r\n                    state['error']['password2'] = \"Two passwords are not matching\"\r\n                }\r\n            }\r\n        }\r\n\r\n        //    console.log(state.error)\r\n        setState({ ...state })\r\n\r\n    }\r\n\r\n\r\n    const validateProperty = (e) => {\r\n\r\n        const result = Joi.validate(e.currentTarget.value, schema[e.currentTarget.name], { abortEarly: false })\r\n        return result.error ? result.error.details[0].message : null\r\n    }\r\n\r\n    return (\r\n\r\n        <form onSubmit={doSubmit}>\r\n\r\n            {Object.keys(state.data).map((keyName, i) => {\r\n\r\n                return (\r\n                    <div className=\"form-group\" key={keyName}>\r\n\r\n                        <label htmlFor={keyName}>{[...keyName,].shift().toLocaleUpperCase()}{keyName.substr(1)}</label>\r\n                        <input id={keyName} className=\"form-control\" type={state.format[i]} name={keyName} value={state['data'][keyName]} onChange={handleChange} />\r\n\r\n                        <div >{state['error'][keyName]}</div>\r\n                    </div>\r\n                )\r\n            })}\r\n            <div>\r\n\r\n                <input ref={button}\r\n                    type=\"submit\"\r\n                    disabled={Boolean(Object.keys(state.error).length)}\r\n                    value={isRegisterForm ? \"Regist\" : \"Login\"\r\n                    } />\r\n            </div>\r\n        </form >\r\n\r\n\r\n    )\r\n\r\n}\r\n\r\nexport default Form;","import React from 'react';\r\nimport Form from './Form/Form'\r\n\r\nconst LoginForm = (props) => {\r\n\r\n\r\n\r\n    return ( <Form isRegisterForm={false} {...props}></Form> );\r\n\r\n\r\n}\r\n \r\nexport default LoginForm;","import React from 'react';\r\nimport Form from './Form/Form'\r\n\r\nconst RegisterForm = (props) => {\r\n    return ( <Form isRegisterForm={true} {...props}></Form> );\r\n}\r\n \r\nexport default RegisterForm","import React, { Component, useContext, Suspense } from 'react';\r\nimport { Route, Switch } from 'react-router-dom';\r\n\r\n\r\n\r\nimport BookListContextProvider from './contexts/BookListContextProvider';\r\n\r\nimport BookList from './components/BookList';\r\nimport Navbar from './components/Navbar';\r\n\r\n\r\nimport LoginForm from './components/LoginForm';\r\nimport RegisterForm from './components/RegisterForm';\r\nimport UserContextProvider from './contexts/UserContextProvider';\r\n\r\n\r\n\r\nconsole.log(process.env.NODE_ENV)\r\n\r\nconst App = (props) => {\r\n\r\n  return (\r\n\r\n    <div className=\"App\">\r\n\r\n      {/* <Suspense></Suspense> */}\r\n\r\n\r\n      <UserContextProvider>\r\n        <BookListContextProvider>\r\n\r\n          <Navbar />\r\n          <Switch>\r\n\r\n            {/* <Route path=\"/login\" render={(props) => { return <Form {... { ...{ isRegisterForm: false }, ...props }} /> }} />*/}\r\n            {/* <Route path=\"/register\" render={(props) => { return <Form isRegisterForm={true}  {...props} /> }} /> */}\r\n\r\n\r\n            <Route path=\"/login\" render={(props) => { return <LoginForm {...props} /> }} />\r\n            <Route path=\"/register\" render={(props) => { return <RegisterForm  {...props} /> }} />\r\n\r\n\r\n            <BookList />\r\n          </Switch>\r\n\r\n        </BookListContextProvider>\r\n      </UserContextProvider>\r\n\r\n    </div>\r\n\r\n  );\r\n}\r\n\r\nexport default App;\r\n\r\n\r\n\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\n//import \"bootstrap/dist/css/bootstrap.css\";\r\nimport './index.css';\r\n\r\n\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport { BrowserRouter } from 'react-router-dom'\r\n\r\nReactDOM.render(\r\n\r\n\r\n    <BrowserRouter>\r\n        <App />\r\n    </BrowserRouter>\r\n\r\n    , document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}