{"version":3,"sources":["config.js","contexts/BookListContextTools/bookListFunctions.js","contexts/BookListContextTools/useBookListStateManager.js","contexts/BookListContextProvider.jsx","contexts/UserContextTools/userFunctions.js","contexts/UserContextTools/useUserStateManager.js","contexts/UserContextProvider.jsx","components/BookListTools/BookForm.jsx","components/BookListTools/BookDetails.jsx","components/BookList.jsx","components/Navbar.jsx","components/Form/Form.jsx","components/LoginForm.jsx","components/RegisterForm.jsx","App.js","serviceWorker.js","index.js"],"names":["url","getToken","axios","defaults","headers","common","initialState","title","author","Date","id","now","localStorage","getItem","useBookListStateManager","useState","state","setState","actionObj","bookList","type","paramObj","delete","then","response","arr","filter","book","catch","err","console","log","data","alert","get","list","map","post","sort","a","b","bookListFunctions","BookListContext","createContext","BookListContextProvider","props","dispatch","Provider","value","children","token","Boolean","jwtDecode","getDecodedToken","username","setToken","setItem","useUserStateManager","result","user","removeItem","password","Promise","resolve","indexOf","setErrMsg","reject","userFunctions","window","location","assign","UserContext","UserContextProvider","BookForm","setTitle","setAuthor","useContext","Fragment","onSubmit","e","preventDefault","substr","placeholder","onChange","currentTarget","required","BookDetails","useEffect","myButton","current","onmouseenter","parentNode","style","onmouseleave","useRef","className","ref","onClick","BookList","key","Navbar","dispatchBook","dispatchUser","length","to","float","textAlign","Form","isRegisterForm","format","password2","error","colName","msg","button","schema","Joi","string","min","label","any","valid","options","language","allowOnly","handleChange","name","validateProperty","validate","abortEarly","details","message","Object","keys","keyName","i","htmlFor","shift","toLocaleUpperCase","disabled","LoginForm","RegisterForm","process","App","path","render","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.da5441e8.chunk.js","sourcesContent":["\r\n\r\n\r\nlet url=\"\"\r\n\r\nif(process.env.NODE_ENV === \"development\"){\r\n\r\n    url=\"http://localhost/api\"\r\n}\r\nelse{\r\n    url=\"/api\"\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport default url;","\r\nimport jwtDecode from \"jwt-decode\";\r\nimport axios from \"axios\";\r\nimport url from \"../../config\";\r\n\r\nif (getToken()) { axios.defaults.headers.common['x-auth-token'] = getToken() }\r\n\r\nexport const initialState = initialize()\r\n\r\n\r\n\r\nfunction initialize() {\r\n    if (getToken()) {\r\n\r\n\r\n        return []\r\n    }\r\n    else {\r\n\r\n        return [{ title: \"Please login to use\", author: Date(), id: Date.now() }]\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport const bookListFunctions = (bookList, setState, { type = \"\", ...paramObj }) => {\r\n\r\n    if (type === \"initialize\") {\r\n\r\n    }\r\n    else if (!getToken()){\r\n        console.log(\"no tokens to perferm booklist functions\")\r\n    }\r\n\r\n    else if (type === \"deleteBook\") {\r\n\r\n        return axios.delete(`${url}/booklist/deletebook/` + paramObj.id)\r\n            .then(response => {\r\n\r\n                const arr = bookList.filter(book => book.id !== paramObj.id)\r\n\r\n                setState(arr)\r\n            })\r\n            .catch(err=>{\r\n\r\n                console.log(err.response.data)\r\n                alert(err.response.data)\r\n            })\r\n\r\n    }\r\n    else if (type === \"logout\") {\r\n      //  alert(\"aaa\")\r\n\r\n        setState([])\r\n    }\r\n    else if (type === \"getBookList\") {\r\n        return axios.get(`${url}/booklist/getbooklist`)\r\n            .then(list => {\r\n\r\n                const arr = list.data.map((book) => {\r\n                    return { title: book.title, author: book.author, id: book.id }\r\n                })\r\n                //   console.log(arr)\r\n                setState(arr)\r\n            })\r\n            .catch(err=>{\r\n                console.log(err.response.data)\r\n                alert(err.response.data)\r\n            })\r\n\r\n    }\r\n    else if (type === \"addBook\") {\r\n\r\n        return axios.post(`${url}/booklist/addbook`, paramObj.book)\r\n            .then(\r\n                (response) => {\r\n                    setState([...bookList, paramObj.book].sort((a, b) => a.id >= b.id ? -1 : 1))\r\n\r\n                }\r\n            )\r\n            .catch(err=>{\r\n                console.log(err.response.data)\r\n                alert(err.response.data)\r\n            })\r\n    }\r\n\r\n    else {\r\n        return bookList\r\n    }\r\n}\r\n\r\nfunction setToken(token) {\r\n    localStorage.setItem(\"token\", token)\r\n}\r\n\r\nfunction getToken() {\r\n\r\n    return localStorage.getItem(\"token\")\r\n}\r\nfunction getDecodedToken() {\r\n\r\n    const token = localStorage.getItem(\"token\")\r\n\r\n    return Boolean(token) ? jwtDecode(token) : null\r\n}\r\n\r\nfunction deleteToken() {\r\n    return localStorage.removeItem(\"token\")\r\n}\r\n\r\n","\r\nimport { useState } from \"react\";\r\n\r\nimport { bookListFunctions, initialState } from './bookListFunctions';\r\n\r\n\r\nexport const useBookListStateManager = () => {\r\n\r\n\r\n  const [state, setState] = useState(initialState);\r\n\r\n  const dispatch = (actionObj) => {\r\n\r\n    const result = bookListFunctions(state, setState, actionObj)\r\n    // if (Promise.resolve(result) !== result) {\r\n    //   setState([ ...state, ...result ])\r\n\r\n    // }\r\n    // else {\r\n    //   result\r\n    //     .then(data => {\r\n    //       setState([ ...state, ...data ])\r\n    //       //this.props.history.push(\"/\")\r\n    //       //window.location.assign(\"/\")\r\n    //     })\r\n    //     .catch(err => {\r\n    //       setState([ ...state ])\r\n    //     })\r\n\r\n    // }\r\n\r\n  }\r\n\r\n  return [state, dispatch];\r\n};\r\n","import React, { createContext, useReducer, useEffect } from 'react';\r\n\r\n\r\n\r\nimport { useBookListStateManager } from './BookListContextTools/useBookListStateManager';\r\n\r\n\r\n\r\nexport const BookListContext = createContext()\r\n\r\n\r\nconst BookListContextProvider = (props) => {\r\n\r\n\r\n    const [bookList, dispatch] = useBookListStateManager()\r\n\r\n\r\n//     const [books, dispatch] = useReducer(\r\n//         bookReducer,\r\n//         JSON.parse(localStorage.getItem(\"books\")) ||\r\n//         [{ title: \"Welcome to use\", author: Date(), id: Date.now() }]\r\n\r\n//     )\r\n\r\n\r\n//    useEffect(() => {\r\n\r\n//        dispatch({ type: \"setLocalStorage\" })\r\n\r\n//         localStorage.setItem(\"books\", JSON.stringify(books))\r\n\r\n//    }, [books])\r\n\r\n\r\n    return (\r\n        <BookListContext.Provider value={{ bookList, dispatch }}>\r\n        {/* <BookListContext.Provider value={{ books, dispatch }}> */}\r\n            {props.children}\r\n        </BookListContext.Provider>\r\n\r\n    );\r\n}\r\n\r\nexport default BookListContextProvider;\r\n\r\n\r\n\r\n\r\n// const [books, dispatch] = useReducer(bookReducer, [\r\n//     { title: \"name of the wind\", author: \"Patrick rothfuss\", id: 1 },\r\n//     { title: \"the way of kings\", author: \"brande sandera\", id: 2 },\r\n//     { title: \"the final empire\", author: \"jillk huss\", id: 3 },\r\n//     { title: \"the hero of ages\", author: \"snelck dussbd\", id: 4 }\r\n// ])\r\n\r\n","import jwtDecode from \"jwt-decode\"\r\nimport axios from \"axios\";\r\nimport url from \"../../config\";\r\n\r\n\r\nexport const initialState = (function () {\r\n\r\n  const token = getDecodedToken()\r\n\r\n  return token\r\n    ? { username: token.username }\r\n    : { username: \"\" }\r\n}());\r\n\r\n\r\nexport const userFunctions = (user, { type = \"\", ...paramObj }) => {\r\n\r\n\r\n\r\n  if (type === \"removeLocalStorage\") {\r\n\r\n    localStorage.removeItem(\"token\")\r\n\r\n\r\n    return { username: \"\" }\r\n  }\r\n  else if (type === \"register\") {\r\n\r\n    console.log(paramObj)\r\n\r\n    return axios\r\n      .post(`${url}/user/register`,\r\n        { username: paramObj.username, password: paramObj.password }\r\n      )\r\n      .then(response => {\r\n        setToken(response.headers[\"x-auth-token\"])\r\n        return Promise.resolve(response.data)\r\n      })\r\n      .catch(err => {\r\n        err.response.data.indexOf(\"user\") > -1\r\n          ? paramObj.setErrMsg(\"username\", err.response.data)\r\n          : paramObj.setErrMsg(\"username\", err.response.data)\r\n\r\n        return Promise.reject(err.response.data)\r\n      })\r\n\r\n\r\n  }\r\n  else if (type === \"login\") {\r\n\r\n    return axios\r\n      .post(`${url}/user/login`, paramObj)\r\n      .then(response => {\r\n\r\n        setToken(response.headers[\"x-auth-token\"])\r\n        return Promise.resolve(response.data)\r\n      })\r\n      .catch(err => {\r\n        err.response.data.indexOf(\"user\") > -1\r\n          ? paramObj.setErrMsg(\"username\", err.response.data)\r\n          : paramObj.setErrMsg(\"password\", err.response.data)\r\n\r\n        return Promise.reject(err.response.data)\r\n      })\r\n\r\n  }\r\n  else { return user }\r\n\r\n\r\n}\r\n\r\n\r\n\r\nfunction setToken(token) {\r\n  localStorage.setItem(\"token\", token)\r\n}\r\n\r\nfunction getToken() {\r\n\r\n  return localStorage.getItem(\"token\")\r\n}\r\nfunction getDecodedToken() {\r\n\r\n  const token = localStorage.getItem(\"token\")\r\n\r\n  return Boolean(token) ? jwtDecode(token) : null\r\n}\r\n\r\n\r\n\r\n","\r\n\r\n\r\n\r\n\r\nimport { useState } from \"react\";\r\nimport { userFunctions, initialState } from './userFunctions'\r\n\r\n\r\nexport const useUserStateManager = ( ) => {\r\n\r\n\r\n\r\n\r\n  const [state, setState] = useState(initialState);\r\n\r\n  const dispatch = (actionObj) => {\r\n\r\n    const result = userFunctions(state, actionObj)\r\n    if (Promise.resolve(result) !== result) {\r\n      setState({ ...state, ...result })\r\n\r\n    }\r\n    else {\r\n      result\r\n        .then(data => {\r\n          setState({ ...state, ...data })\r\n          //this.props.history.push(\"/\")\r\n          window.location.assign(\"/\")\r\n        })\r\n        .catch(err => {\r\n          setState({ ...state })\r\n        })\r\n\r\n    }\r\n\r\n  }\r\n\r\n  return [state, dispatch];\r\n};\r\n\r\n\r\n\r\n\r\n\r\n// import { useState, useContext, useEffect, useCallback, useMemo, } from 'react';\r\n// //import { reducerFunction } from './reducerFunction'\r\n// //import { TemplateContext } from './TemplateContextProvider';\r\n\r\n\r\n\r\n\r\n\r\n// export const useAsyncReducer = (reducer, initialState = null) => {\r\n\r\n//   const [state, setState] = useState(initialState);\r\n\r\n\r\n//   const dispatch = async action => {\r\n//     const result = reducer(state, action);\r\n\r\n//   };\r\n\r\n//   return [state, null];\r\n// };\r\n\r\n","import React, { createContext, useState, useReducer, useEffect, useContext } from 'react';\r\n\r\n\r\n\r\nimport { useUserStateManager } from './UserContextTools/useUserStateManager'\r\n\r\nexport const UserContext = createContext()\r\n\r\nconst UserContextProvider = (props) => {\r\n\r\n    const [user, dispatch] = useUserStateManager()\r\n   // useEffect(function () {   }, [])\r\n\r\n    return (\r\n        <UserContext.Provider value={{ user, dispatch }}>\r\n            {props.children}\r\n        </UserContext.Provider>\r\n    );\r\n}\r\n\r\nexport default UserContextProvider;\r\n\r\n","import React, { useState, useContext } from 'react';\r\nimport { BookListContext } from '../../contexts/BookListContextProvider';\r\nimport { UserContext } from '../../contexts/UserContextProvider';\r\n\r\n\r\n\r\n\r\nconst BookForm = (props) => {\r\n\r\n    const [title, setTitle] = useState(\"\")\r\n    const [author, setAuthor] = useState(\"\")\r\n\r\n    const { dispatch } = useContext(BookListContext)\r\n    const { user } = useContext(UserContext)\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault()\r\n\r\n\r\n\r\n        dispatch({ type: \"addBook\", book: { title, author: author || Date().substr(0, 24), id: Date.now() } })\r\n\r\n\r\n\r\n\r\n\r\n        setTitle(\"\")\r\n        setAuthor(\"\")\r\n    }\r\n\r\n    //{!user.username &&<button>  <Link to=\"/login\" >login  </Link></button>}\r\n    return (\r\n\r\n        <React.Fragment>\r\n\r\n            {user.username && <form onSubmit={handleSubmit}>\r\n                <input placeholder=\"title\" type=\"text\" value={title} onChange={(e) => { setTitle(e.currentTarget.value) }} required></input>\r\n                <input placeholder=\"author\" type=\"text\" value={author} onChange={(e) => { setAuthor(e.currentTarget.value) }} ></input>\r\n\r\n                <input type=\"submit\" value=\"Add Book\" />\r\n            </form>\r\n            }\r\n        </React.Fragment>\r\n    );\r\n}\r\n\r\nexport default BookForm;","import React, { useContext, useRef,useEffect /*useState*/ } from 'react';\r\nimport { BookListContext } from '../../contexts/BookListContextProvider'\r\n\r\n\r\n\r\nconst BookDetails = ({ book }) => {\r\n\r\n   \r\n   \r\n    useEffect(function(){\r\n\r\n     \r\n         myButton.current.onmouseenter = (e) => { e.currentTarget.parentNode.style = \"opacity:0.7;  text-decoration: line-through;\" }\r\n         myButton.current.onmouseleave=(e) => { e.currentTarget.parentNode.style = \"opacity:1;  text-decoration: none;\" }\r\n\r\n     },[]);\r\n  \r\n     \r\n\r\n\r\n\r\n\r\n    const myButton = useRef()\r\n    const { dispatch } = useContext(BookListContext)\r\n\r\n    // const [{useOut,mouseEnter,mouseOut}, setPanalStyle] = useState({\r\n\r\n    //     useOut:true,\r\n    //     mouseEnter: {\r\n    //         opacity: 0.7,\r\n    //         textDecoration: \"line-through\"\r\n    //     },\r\n\r\n    //     mouseOut: {\r\n    //         opacity: 1,\r\n    //         textDecoration: \"none\"\r\n    //     }\r\n    // })\r\n\r\n\r\n\r\n\r\n    return (\r\n    \r\n           \r\n            <li>\r\n             \r\n                <button className=\"deleteBtn\" \r\n                    \r\n                    ref={myButton}\r\n\r\n                    onClick={() => { dispatch({ type: \"deleteBook\", id: book.id }) }}\r\n\r\n                    // onMouseEnter={(e) => { setPanalStyle({useOut:!useOut,mouseEnter,mouseOut}) }}\r\n                    // onMouseOut={(e) => { setPanalStyle({useOut:!useOut,mouseEnter,mouseOut}) }}\r\n\r\n                 //    onMouseEnter={(e) => { e.currentTarget.parentNode.style = \"opacity:0.7;  text-decoration: line-through;\" }}\r\n                 //    onMouseOut={(e) => { e.currentTarget.parentNode.style = \"opacity:1;  text-decoration: none;\" }}\r\n\r\n                >delete</button>\r\n\r\n\r\n                <div className=\"title\">{book.title}  </div>\r\n\r\n\r\n\r\n                <div className=\"author\">{book.author} </div>\r\n\r\n\r\n            </li>\r\n\r\n        \r\n\r\n\r\n    );\r\n}\r\n\r\nexport default BookDetails;","import React, { useContext,useEffect } from 'react';\r\nimport { BookListContext } from '../contexts/BookListContextProvider'\r\nimport BookForm from './BookListTools/BookForm';\r\nimport BookDetails from './BookListTools/BookDetails';\r\n\r\nconst BookList = (props) => {\r\n\r\n    const { bookList,dispatch } = useContext(BookListContext)\r\n\r\n    \r\n    //  bookList.sort(\r\n    //      function(a,b){  \r\n            \r\n    //          return a.id>=b.id?-1:1\r\n            \r\n    //      }\r\n    //  )\r\n    useEffect(function(){\r\n\r\n        dispatch({type:\"getBookList\"})\r\n    },[])\r\n\r\n\r\n    return (\r\n\r\n        <div className=\"book-list\">\r\n               <BookForm/>\r\n            <ul >\r\n                {\r\n                    bookList.map(book => {\r\n                        return (        \r\n                         <BookDetails {...{ key:book.id,book }}/*book={book}*/ />\r\n                        )\r\n                    })\r\n                }\r\n            </ul>\r\n\r\n         \r\n        </div>\r\n\r\n    );\r\n}\r\n\r\nexport default BookList;","import React, { useContext } from 'react';\r\nimport { BookListContext } from '../contexts/BookListContextProvider'\r\nimport { Route, Switch, Link, } from 'react-router-dom';\r\nimport { UserContext } from '../contexts/UserContextProvider';\r\n\r\nconst Navbar = (props) => {\r\n\r\n\r\n  const { bookList, dispatch: dispatchBook } = useContext(BookListContext);\r\n  const { user, dispatch: dispatchUser } = useContext(UserContext)\r\n  \r\n  console.log(Boolean(user.username))\r\n  return (\r\n    <React.Fragment>\r\n\r\n\r\n\r\n\r\n      <nav className=\"navbar\">\r\n\r\n        <h1>{user.username} Reading List...</h1>\r\n        <p>Currently you have {bookList.length} books to get through...</p>\r\n\r\n\r\n\r\n      </nav>\r\n      <button> <Link to=\"/\">home </Link> </button>\r\n      {!user.username &&<button>  <Link to=\"/login\" >login  </Link></button>}\r\n      {!user.username &&<button>  <Link to=\"/register\">register  </Link></button>}\r\n\r\n      {/* <button style={{float:\"right\"}} onClick={dispatchBook.bind(null, { type: \"removeLocalStorage\" })}>Default</button> */}\r\n      {user.username &&<button style={{ float: \"right\" }}\r\n        onClick={function () {\r\n          dispatchBook({ type: \"logout\" })\r\n\r\n          dispatchUser({ type: \"removeLocalStorage\" })\r\n\r\n          window.location.assign(\"/\")\r\n        }}>\r\n        logout\r\n        </button>\r\n      }\r\n      {!Boolean(bookList.length) ? <p style={{ textAlign: \"center\" }}>No books to read, Hello free time :)</p> : <p></p>}\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default Navbar;","import React, { useState, useEffect, useRef, useContext, useCallback } from 'react';\r\nimport Joi from 'joi-browser';\r\nimport jwtDecode from \"jwt-decode\"\r\n\r\nimport { UserContext } from \"../../contexts/UserContextProvider\"\r\n\r\nconst Form = (props) => {\r\n\r\n    //console.log(props.location.pathname)\r\n    let isRegisterForm = props.isRegisterForm\r\n    const { user, dispatch: dispatchUser } = useContext(UserContext)\r\n\r\n    const [state, setState] = useState(\r\n        {\r\n            format: isRegisterForm\r\n                ? [\"text\", \"password\", \"password\"]\r\n                : [\"text\", \"password\"],\r\n\r\n            data: isRegisterForm\r\n                ? { username: \"\", password: \"\", password2: \"\", }\r\n                : { username: \"\", password: \"\" },\r\n\r\n            error: isRegisterForm\r\n                ? { username: \"\", password: \"\", password2: \"\" }\r\n                : { username: \"\", password: \"\" }\r\n        }\r\n    )\r\n\r\n\r\n    const setErrMsg = (colName, msg) => {\r\n\r\n\r\n        setState({\r\n            ...state,\r\n            error: { ...state.error, [colName]: msg } \r\n        })\r\n\r\n\r\n        // const obj = state.error\r\n        // const obj2 = { ...obj, [colName]: msg }\r\n        // const obj3 = { error: obj2 }\r\n        // const obj4 = { ...state, ...obj3 }\r\n        // setState(obj4)\r\n    }\r\n\r\n    const button = useRef();\r\n\r\n    //  button.current.disabled = \"true\"\r\n    //  button.current.value = isRegisterForm ? \"Sign Up\" : \"Login\"\r\n\r\n\r\n\r\n\r\n    const schema = {\r\n        username: Joi.string().min(3).required().label(\"Username\"),\r\n        password: Joi.string().min(3).required().label(\"Password\"),\r\n        password2: Joi.any().valid(state.data.password).required().options({ language: { any: { allowOnly: 'is not matching' } } }).label(\"Retyped Passwrod\")\r\n    }\r\n\r\n\r\n    const doSubmit = (e) => {\r\n        e.preventDefault();\r\n        dispatchUser({ type: isRegisterForm?\"register\":\"login\", ...state.data, setErrMsg })\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n    const handleChange = (e) => {\r\n        // e.persist();\r\n\r\n        state['data'][e.currentTarget.name] = e.currentTarget.value\r\n\r\n        state['error'] = validateProperty(e)\r\n            ? { ...state['error'], [e.currentTarget.name]: validateProperty(e) }\r\n            : (function () { delete state['error'][e.currentTarget.name]; return state['error'] })()\r\n\r\n        if (isRegisterForm && (e.currentTarget.name === \"password\")) {\r\n            if (!state['error']['password']) {\r\n\r\n                if (state['data']['password'] === state['data']['password2']) {\r\n                    delete state['error']['password2']\r\n                }\r\n                else {\r\n\r\n                    state['error']['password2'] = \"Two passwords are not matching\"\r\n                }\r\n            }\r\n        }\r\n\r\n        //    console.log(state.error)\r\n        setState({ ...state })\r\n\r\n    }\r\n\r\n\r\n    const validateProperty = (e) => {\r\n\r\n        const result = Joi.validate(e.currentTarget.value, schema[e.currentTarget.name], { abortEarly: false })\r\n        return result.error ? result.error.details[0].message : null\r\n    }\r\n\r\n    return (\r\n\r\n        <form onSubmit={doSubmit}>\r\n\r\n            {Object.keys(state.data).map((keyName, i) => {\r\n\r\n                return (\r\n                    <div className=\"form-group\" key={keyName}>\r\n\r\n                        <label htmlFor={keyName}>{[...keyName,].shift().toLocaleUpperCase()}{keyName.substr(1)}</label>\r\n                        <input id={keyName} className=\"form-control\" type={state.format[i]} name={keyName} value={state['data'][keyName]} onChange={handleChange} />\r\n\r\n                        <div >{state['error'][keyName]}</div>\r\n                    </div>\r\n                )\r\n            })}\r\n            <div>\r\n\r\n                <input ref={button}\r\n                    type=\"submit\"\r\n                    disabled={Boolean(Object.keys(state.error).length)}\r\n                    value={isRegisterForm ? \"Regist\" : \"Login\"\r\n                    } />\r\n            </div>\r\n        </form >\r\n\r\n\r\n    )\r\n\r\n}\r\n\r\nexport default Form;","import React from 'react';\r\nimport Form from './Form/Form'\r\n\r\nconst LoginForm = (props) => {\r\n    return ( <Form isRegisterForm={false} {...props}></Form> );\r\n\r\n\r\n}\r\n \r\nexport default LoginForm;","import React from 'react';\r\nimport Form from './Form/Form'\r\n\r\nconst RegisterForm = (props) => {\r\n    return ( <Form isRegisterForm={true} {...props}></Form> );\r\n}\r\n \r\nexport default RegisterForm","import React, { Component, useContext, Suspense } from 'react';\nimport { Route, Switch } from 'react-router-dom';\n\n\n\nimport BookListContextProvider from './contexts/BookListContextProvider';\n\nimport BookList from './components/BookList';\nimport Navbar from './components/Navbar';\n\n\nimport LoginForm from './components/LoginForm';\nimport RegisterForm from './components/RegisterForm';\nimport UserContextProvider from './contexts/UserContextProvider';\n\n\n\nconsole.log(process.env.NODE_ENV)\n\nconst App = (props) => {\n    \n  return (\n\n    <div className=\"App\">\n      \n      <Suspense></Suspense>\n\n\n      <UserContextProvider>\n        <BookListContextProvider>\n\n          <Navbar />\n          <Switch>\n\n            {/* <Route path=\"/login\" render={(props) => { return <Form {... { ...{ isRegisterForm: false }, ...props }} /> }} />\n          <Route path=\"/register\" render={(props) => { return <Form isRegisterForm={true}  {...props} /> }} /> */}\n\n\n            <Route path=\"/login\" render={(props) => { return <LoginForm {...props} /> }} />\n            <Route path=\"/register\" render={(props) => { return <RegisterForm  {...props} /> }} />\n\n\n            <BookList />\n          </Switch>\n\n        </BookListContextProvider>\n      </UserContextProvider>\n\n    </div>\n\n  );\n}\n\nexport default App;\n\n\n\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\n//import \"bootstrap/dist/css/bootstrap.css\";\nimport './index.css';\n\n\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nimport { BrowserRouter } from 'react-router-dom'\n\nReactDOM.render(\n\n\n    <BrowserRouter>\n        <App />\n    </BrowserRouter>\n\n    , document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}